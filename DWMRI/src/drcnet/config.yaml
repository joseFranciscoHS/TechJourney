dbrain:
  train:
    num_epochs: 10  # Increased for better convergence
    device: cuda
    learning_rate: 0.001  # Base learning rate for single GPU
    batch_size: 8  # Per-GPU batch size
    use_scheduler: false
    scheduler_type: "cosine"  # Better for denoising tasks
    checkpoint_dir: "drcnet/checkpoints/dbrain"
    # Multi-GPU settings
    multi_gpu: false  # Set to false to disable multi-GPU
    gpu_ids: [0, 1, 2]  # Specify which GPUs to use
    auto_scale_lr: true  # Automatically scale LR based on GPU count
    auto_exclude_imbalanced: true  # Automatically exclude imbalanced GPUs
    memory_threshold: 0.15  # Minimum memory ratio to consider balanced (0.15 = 15%)
    ## cosine annealing warm restarts
    scheduler_T_0: 20  # More frequent restarts
    eta_min_lr: 0.00001  # Lower minimum LR
    scheduler_T_mult: 2
    ## stepLR
    scheduler_step_size: 40
    scheduler_gamma: 0.1
    ## reduceLROnPlateau
    scheduler_patience: 15  # More aggressive reduction
    scheduler_factor: 0.5  # Less aggressive reduction
    min_lr: 0.00001
  reconstruct:
    device: cuda
    metrics_dir: "drcnet/metrics/dbrain"
    images_dir: "drcnet/images/dbrain"
  model:
    in_channel: 9 # is the number of volumes taking one out to be predicted
    out_channel: 1 # is the predicted volume
    groups: 4  # Increased for better feature separation
    dense_convs: 3  # More dense connections for better feature learning
    residual: true
    base_filters: 32  # Doubled for more model capacity
  data:
    patch_size: 16  # Larger patches for better context
    step: 8  # Larger step for more diverse training data
    num_b0s: 6
    num_volumes: 10
    noise_sigma: 0.1
    bvalue: 2500
    take_x: 128
    take_y: 128
    take_z: 96
    nii_path_lightning: "/teamspace/s3_folders/dwmri-dataset/D_BRAIN_b2500_6_60_14_HCP_nless.nii"
    bvecs_path_lightning: "/teamspace/s3_folders/dwmri-dataset/D_BRAIN_b2500_6_60_HCP_b_matrix.txt"
    nii_path: "/home/paco/d_brain/D_BRAIN_b2500_6_60_14_HCP_nless.nii"
    bvecs_path: "/home/paco/d_brain/D_BRAIN_b2500_6_60_HCP_b_matrix.txt"
stanford:
  train:
    num_epochs: 100
    num_volumes: 6
    device: cpu
    mask_p: 0.3
    dropout_p: 0.3
    checkpoint_dir: "checkpoints"
    learning_rate: 0.00001
    batch_size: 8
  model:
    in_channel: 9
    out_channel: 9
  data:
    num_volumes: 10
    noise_sigma: 0.01
    bvalue: 2500
